<?xml version="1.0" encoding="UTF-8"?><?import javafx.geometry.Insets?><?import javafx.scene.control.*?><?import javafx.scene.layout.*?><?import javafx.scene.text.TextFlow?><?import javafx.scene.web.WebView?><?import javafx.scene.shape.Line?><AnchorPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.dto.gui.NeuroSymbolicController">    <!-- Primary SplitPane: Cockpit vs Hub -->    <SplitPane dividerPositions="0.28" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">                <!-- Left Panel: Control & Simulation Cockpit -->        <VBox minWidth="280.0" maxWidth="450.0" spacing="0.0" styleClass="lab-panel">            <!-- Header Bar -->            <HBox styleClass="lab-header" alignment="CENTER_LEFT">                <Label text="COCKPIT CONTROL" styleClass="lab-header-text" />            </HBox>                        <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent;">                <VBox spacing="12.0" style="-fx-padding: 12;">                                        <!-- A. Drug Identity Zone -->                    <VBox spacing="8" style="-fx-padding: 10; -fx-background-color: white; -fx-border-color: #BDC3C7;">                        <Label text="DRUG IDENTITY" style="-fx-font-weight: bold; -fx-text-fill: #566573; -fx-font-size: 10px;" />                                                <HBox spacing="4">                            <TextField fx:id="nsDrugSearchField" promptText="Search SMILES/Name..." HBox.hgrow="ALWAYS" styleClass="text-field" />                            <Button fx:id="nsAnalyzeButton" onAction="#onAnalyze" text="RUN" styleClass="action-button" />                        </HBox>                                                <!-- Structure Viewer (WebView) -->                        <StackPane minHeight="150" style="-fx-background-color: white; -fx-border-color: #EAEDED; -fx-border-width: 1;">                            <WebView fx:id="nsDrugStructureWebView" prefHeight="150" />                            <Label fx:id="nsNoStructureLabel" text="WAITING FOR INPUT..." textFill="#BDC3C7" visible="false"/>                        </StackPane>                                                <!-- Property Chips -->                        <FlowPane fx:id="nsPropFlowPane" hgap="4" vgap="4">                            <!-- Chips will be added dynamically: MW, LogP, etc. -->                        </FlowPane>                    </VBox>                                        <!-- B. ML Predictor Zone (Risk Spectrum) -->                    <VBox spacing="8" style="-fx-padding: 10; -fx-background-color: white; -fx-border-color: #BDC3C7;">                        <Label text="TOXICITY RISK ASSESSMENT" style="-fx-font-weight: bold; -fx-text-fill: #566573; -fx-font-size: 10px;" />                                                <VBox spacing="15" alignment="CENTER">                            <StackPane fx:id="nsSpectrumContainer">                                <!-- Spectrum Bar -->                                <Region fx:id="nsRiskSpectrumBar" styleClass="risk-spectrum" />                                <!-- Marker -->                                <Region fx:id="nsRiskMarker" styleClass="risk-marker" StackPane.alignment="CENTER_LEFT">                                    <StackPane.margin>                                        <Insets left="0" />                                    </StackPane.margin>                                </Region>                                <!-- Value Label (floating) -->                                <Label fx:id="nsRiskValueLabel" text="0.00" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-translate-y: -20;" />                            </StackPane>                                                        <HBox alignment="CENTER_LEFT">                                <Label text="SAFE (0.0)" style="-fx-font-size: 8px; -fx-text-fill: #7F8C8D;" />                                <Region HBox.hgrow="ALWAYS" />                                <Label text="TOXIC (1.0)" style="-fx-font-size: 8px; -fx-text-fill: #7F8C8D;" />                            </HBox>                        </VBox>                                                <Separator />                                                <GridPane hgap="10" vgap="4">                            <columnConstraints>                                <ColumnConstraints percentWidth="50" />                                <ColumnConstraints percentWidth="50" />                            </columnConstraints>                            <VBox GridPane.columnIndex="0">                                <Label text="EST. CONFIDENCE" style="-fx-font-size: 8px; -fx-text-fill: #7F8C8D;" />                                <Label fx:id="nsConfidenceLabel" text="---" style="-fx-font-weight: bold; -fx-font-size: 11px;" />                            </VBox>                            <VBox GridPane.columnIndex="1" alignment="TOP_RIGHT">                                <Label text="ACTIVE MODEL" style="-fx-font-size: 8px; -fx-text-fill: #7F8C8D;" />                                <Label fx:id="nsModelNameLabel" text="RandomForest v2.1" style="-fx-font-size: 10px;" />                            </VBox>                        </GridPane>                    </VBox>                                        <!-- C. What-If Simulation Zone -->                    <VBox spacing="8" style="-fx-padding: 10; -fx-background-color: white; -fx-border-color: #BDC3C7;">                        <Label text="HYPOTHESIS TESTING (SIMULATION)" style="-fx-font-weight: bold; -fx-text-fill: #566573; -fx-font-size: 10px;" />                                                <VBox spacing="6">                            <Label text="CURRENT TARGET" style="-fx-font-size: 8px; -fx-text-fill: #7F8C8D;" />                            <Label fx:id="nsCurrentTargetLabel" text="NONE (BASELINE)" style="-fx-font-weight: bold; -fx-text-fill: #27AE60;" />                        </VBox>                                                <VBox spacing="4">                            <Label text="SIMULATION TARGET" style="-fx-font-size: 8px; -fx-text-fill: #7F8C8D;" />                            <ComboBox fx:id="nsTargetSimulatorBox" promptText="Select Enzyme/Target..." maxWidth="Infinity" styleClass="combo-box" />                        </VBox>                                                <Button fx:id="nsRunSimulationBtn" onAction="#runSimulation" text="SIMULATE OUTCOME" maxWidth="Infinity" styleClass="action-button" />                    </VBox>                                    </VBox>            </ScrollPane>                        <HBox style="-fx-padding: 4; -fx-background-color: #D5DBDB;">                <Label fx:id="nsSystemStatusLabel" text="ANALYZER STATUS: IDLE" style="-fx-font-size: 8px; -fx-font-weight: bold; -fx-text-fill: #566573;" />            </HBox>        </VBox>                <!-- Right Panel: Analysis & Visualization Hub -->        <VBox style="-fx-background-color: white;">            <SplitPane orientation="VERTICAL" dividerPositions="0.65" VBox.vgrow="ALWAYS">                <!-- Upper Split: Visualization Tabs -->                <TabPane tabClosingPolicy="UNAVAILABLE" styleClass="industrial-tabs">                    <Tab text="SDT LOGIC TREE">                        <StackPane style="-fx-background-color: #F8F9F9; -fx-padding: 10;">                             <StackPane style="-fx-background-color: white; -fx-border-color: #BDC3C7; -fx-effect: innershadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 0);">                                <WebView fx:id="nsSdtTreeWebView" />                                <Label fx:id="nsTreePlaceholder" text="VISUALIZATION SCREEN" textFill="#BDC3C7" />                             </StackPane>                        </StackPane>                    </Tab>                    <Tab text="NARRATIVE INSIGHT">                        <VBox spacing="5" style="-fx-padding: 10; -fx-background-color: #F8F9F9;">                            <TextFlow fx:id="nsInsightTextFlow" style="-fx-background-color: white; -fx-border-color: #BDC3C7; -fx-padding: 15; -fx-font-family: 'Consolas';" />                        </VBox>                    </Tab>                </TabPane>                                <!-- Lower Split: Data Grid & Logic Tuner -->                <VBox spacing="0">                    <HBox style="-fx-background-color: #BFC9CA; -fx-padding: 4 10;">                        <Label text="DATA STREAM & LOGIC TUNER" style="-fx-font-weight: bold; -fx-font-size: 10px;" />                    </HBox>                    <TableView fx:id="nsDataGridTable" VBox.vgrow="ALWAYS" editable="true">                        <columns>                            <TableColumn fx:id="nsParamNameCol" text="PARAMETER" prefWidth="150" />                            <TableColumn fx:id="nsParamValueCol" text="VALUE" prefWidth="100" />                            <TableColumn fx:id="nsParamSourceCol" text="SOURCE" prefWidth="120" />                            <TableColumn fx:id="nsParamThresholdCol" text="THRESHOLD (ADJ)" prefWidth="120" />                            <TableColumn fx:id="nsParamStatusCol" text="IMPACT" prefWidth="100" />                        </columns>                        <columnResizePolicy>                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />                        </columnResizePolicy>                    </TableView>                </VBox>            </SplitPane>        </VBox>    </SplitPane></AnchorPane>